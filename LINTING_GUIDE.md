# TypeScript Linting Guide

## Overview

TypeScript ESLint is now configured to catch code quality issues and improve code generated by Claude Code.

## Quick Commands

```bash
# Standard lint check (shows errors & warnings)
npm run lint

# Auto-fix issues
npm run lint:fix

# Strict mode (fails on any warning)
npm run lint:strict

# Type checking only
npm run type-check

# Full quality check (type-check + strict lint)
npm run quality
```

## Pre-commit Hooks

ESLint runs automatically on commit via pre-commit hooks:

```bash
# Install hooks (one-time setup)
pre-commit install

# Run hooks manually
pre-commit run --all-files

# Skip hooks (use sparingly!)
git commit --no-verify
```

## Current State

- **850 lint issues detected** across the codebase
- Most common issues:
  - **Floating promises** - Unhandled async calls (can cause silent failures)
  - **Unsafe `any` usage** - Missing type safety
  - **Prefer `??` over `||`** - Safer null handling
  - **Promise-returning event handlers** - React event handler type mismatches

## Key Rules Enforced

### Type Safety
- `@typescript-eslint/no-floating-promises` - Catch unhandled async operations
- `@typescript-eslint/no-unsafe-assignment` - Prevent unsafe `any` assignments
- `@typescript-eslint/no-explicit-any` - Discourage `any` usage
- `@typescript-eslint/consistent-type-imports` - Enforce `import type` syntax

### Code Quality
- `@typescript-eslint/prefer-nullish-coalescing` - Use `??` instead of `||`
- `@typescript-eslint/await-thenable` - Only await promises
- `@typescript-eslint/no-misused-promises` - Prevent promise type mismatches
- `react-hooks/rules-of-hooks` - Enforce React Hooks rules

### React-Specific
- `react-hooks/exhaustive-deps` - Catch missing dependencies
- `react-refresh/only-export-components` - HMR compatibility

## Configuration Files

- **ESLint Config:** `frontend/eslint.config.js` (flat config format)
- **TypeScript Config:** `frontend/tsconfig.json`
- **Pre-commit Config:** `.pre-commit-config.yaml`

## Customizing Rules

Edit `frontend/eslint.config.js` to adjust rule severity:

```javascript
rules: {
  '@typescript-eslint/no-explicit-any': 'warn', // Change 'error' to 'warn'
  '@typescript-eslint/no-floating-promises': 'off', // Disable rule
}
```

## CI/CD Integration

Add to your CI pipeline:

```bash
npm run quality  # Runs type-check + strict linting
```

## Gradual Adoption

With 850 issues, consider:

1. **Fix critical errors first** (floating promises, unsafe assignments)
2. **Use `lint:fix` for auto-fixable issues** (formatting, simple refactors)
3. **Gradually address warnings** (explicit-any, nullish coalescing)

## IDE Integration

Most IDEs auto-detect ESLint:

- **VS Code:** Install "ESLint" extension
- **Cursor:** Built-in support
- **WebStorm:** ESLint enabled by default

## Troubleshooting

### "ESLint couldn't find config"
- Ensure you're in `frontend/` directory
- Check `eslint.config.js` exists
- Run `npm install` to install dependencies

### "Permission denied" on node_modules/.bin/eslint
```bash
chmod +x frontend/node_modules/.bin/eslint
```

### Pre-commit hook fails
```bash
# Update pre-commit
pre-commit autoupdate

# Re-install hooks
pre-commit install --install-hooks
```

## Resources

- [TypeScript ESLint Rules](https://typescript-eslint.io/rules/)
- [ESLint Config Guide](https://eslint.org/docs/latest/use/configure/)
- [React Hooks Rules](https://react.dev/reference/rules/rules-of-hooks)
